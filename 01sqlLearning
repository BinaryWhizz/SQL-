-- Learnings -- 


CREATE DATABASE sample_database;

USE sample_database;

ALTER DATABASE sample_database CHARACTER SET ascii COLLATE ascii_general_ci ENCRYPTION = "Y" READ ONLY = 0;

SHOW DATABASES;

DROP DATABASE sample_database;

SHOW DATABASES; 


USE sample_schema;

SELECT * FROM courses_data; 

SELECT Credits FROM courses_data;

SELECT * FROM student_information;

SELECT DISTINCT Department FROM student_information;

SELECT GPA AS "Great Point Average" 
FROM student_information;

SELECT c.Credits, e.Grade, s.GPA 
FROM courses_data AS c, enrollments_data AS e, student_information AS s;


SELECT Gender, Department, GPA
FROM student_information
WHERE Age > 20; 


CREATE TABLE sample_table(
ID int,
Person_names varchar(255),
Age int,
Income float);

SHOW TABLES;

DESC sample_table;

CREATE TABLE sample_table_2(
ID int NOT NULL, 
Person_names varchar(255),
Age int,
Income float,
UNIQUE(ID)
);

SHOW TABLES;

DESC sample_table;


CREATE TABLE sample_table_3(
ID int NOT NULL, 
Person_names varchar(255),
Age int,
Income float,
UNIQUE(ID)
);

INSERT INTO sample_table_3 (ID, Person_names, Age, Income) 
VALUES (2,'Alex', 34, 23400.75); 

SELECT * FROM sample_table_3; 


UPDATE sample_table_3
SET Person_names = 'Sam' 
WHERE ID = 2;

SELECT * FROM sample_table_3;

DELETE FROM sample_table_3 WHERE Person_names = 'Azad';

SELECT * FROM sample_table_3;


TRUNCATE TABLE sample_table_3;

SELECT * FROM sample_table_3;



DROP TABLE sample_table_3;

SHOW TABLES;


CREATE TABLE final_table_3(
ID int NOT NULL, 
Person_names varchar(255),
Age int,
Income float,
UNIQUE(ID),
CHECK(Age >= 18)
);

DESC final_table_3;      -- Show the structure (schema) of the table named final_table_3.


INSERT INTO final_table_3 (ID, Person_names, Age, Income) 
VALUES (2,'Alex', 34, 23400.75); 

SELECT * FROM final_table_3; 




NEW NOTES -

CREATE DATABASE temp1;
create database temp2;

CREATE DATABASE college;

DROP DATABASE temp1;
DROP DATABASE temp2;

USE college;

CREATE TABLE student (
  id INT PRIMARY KEY,
  name VARCHAR(50),
  age INT NOT NULL
);

INSERT INTO student VALUES(1, "Luffy", 25);
INSERT INTO student VALUES(2, "Naruto", 29);

SELECT * FROM student;

CREATE DATABASE IF NOT EXISTS college;
DROP DATABASE IF EXISTS company;
SHOW DATABASES;
SHOW TABLES;                 -- Now we're using college table ("USE college")

DROP TABLE student;

CREATE TABLE student(
  rollno INT PRIMARY KEY,
  name VARCHAR(50)
);

SELECT * FROM student;

INSERT INTO student
(rollno, name)
VALUES
(1, "Luffy"),
(2, "Naruto"),
(3, "Shanks");

SELECT * FROM student;

INSERT INTO student VALUES(4, "Kakashi");
SELECT * FROM student;

DROP TABLE employee;

-- Practice Qs 1
-- Qs: Create a database for your company named XYZ.
-- Step1: create a table inside this DB to store employee info (id, name and salary).
-- Step2: Add following information in the DB :
-- "adam", 25000
-- "bob", 30000
-- "casey", 40000
-- Step3: Select & view all your table data.

CREATE DATABASE xyz_company;
USE xyz_company;

CREATE TABLE employee(
  id INT PRIMARY KEY,
  name VARCHAR(100),
  salary INT
);

INSERT INTO employee
(id, name, salary)
VALUES
(1, "Luffy", 25000),
(2, "Naruto", 30000),
(3, "Shanks", 45000);

SELECT * FROM employee;



CREATE TABLE temp1 (
 id INT UNIQUE
);

INSERT INTO temp1 VALUES (101);
INSERT INTO temp1 VALUES (101);

-- Creating Primary Key 

-- CREATE TABLE temp1 (
--   id INT PRIMARY KEY
-- );

-- OR 

-- CREATE TABLE temp1 (
-- id INT, 
-- name varchar(50),
-- age INT,
-- city VARCHAR(20),
-- PRIMARY KEY (id)         -- Column name (id) that we want to make it primary key 
-- ); 

CREATE TABLE temp1 (
id INT, 
name varchar(50),
age INT,
city VARCHAR(20),
PRIMARY KEY (id, name)         -- combination of column names (ids) that we want to make primary key , combination will be unique 
); 

CREATE TABLE emp (
  id INT,
  salary INT DEFAULT 25000 );
  
INSERT INTO emp (id) VALUES (101);
SELECT * FROM emp;


CREATE DATABASE college;
USE college;

CREATE TABLE student1 (
    rollno INT PRIMARY KEY,
    name VARCHAR(50),
    marks INT NOT NULL,
    grade VARCHAR(1),
    city VARCHAR(20)
);

INSERT INTO student1
(rollno, name, marks, grade, city)
VALUES
(101, "anil", 78, "C", "Pune"),
(102, "bhumika", 93, "A", "Mumbai"),
(103, "chetan", 85, "B", "Mumbai"),
(104, "dhruv", 96, "A", "Delhi"),
(105, "emanuel", 12, "F", "Delhi"),
(106, "farah", 82, "B", "Delhi");

SELECT name, marks FROM student1;

SELECT DISTINCT city FROM student1;      -- DISTINCT - not to get the repetetion or duplicate values 

SELECT * 
FROM student1 
WHERE marks>80;

SELECT * 
FROM student1 
WHERE city = "Mumbai";

SELECT * 
FROM student1 
WHERE city = "Mumbai" AND marks>80;

SELECT * 
FROM student1 
WHERE marks BETWEEN 80 AND 90; 

SELECT * 
FROM student1 
WHERE city IN ("Delhi", "Mumbai", "Ghy");     -- Ghy isn't in DB, it won't show error

SELECT * 
FROM student1 
WHERE city NOT IN ("Delhi", "Mumbai", "Ghy");     -- to reverse the condition, using NOT

SELECT * 
FROM student1
LIMIT 3;

SELECT * 
FROM student1
WHERE marks>80
LIMIT 3;

SELECT * 
FROM student1
ORDER BY marks ASC;

SELECT * 
FROM student1
ORDER BY marks DESC;

SELECT * 
FROM student1
ORDER BY marks DESC
LIMIT 3;

SELECT MAX(marks)
FROM student;

SELECT MIN(marks)
FROM student;

SELECT AVG(marks)
FROM student;

SELECT COUNT(rollno)
FROM student;

SELECT city, count(rollno)
FROM student1
GROUP BY city; 

SELECT city,name, count(rollno)
FROM student1
GROUP BY city,name; 

SELECT city, AVG(marks)
FROM student1
GROUP BY city;

SELECT grade, count(rollno)
FROM student1
GROUP BY grade
ORDER BY grade;


SELECT city, count(rollno)
FROM student1
GROUP BY city
HAVING max(marks) > 90;

SELECT city
FROM student1
WHERE grade = "A"
GROUP BY city
HAVING MAX(marks) >= 90
ORDER BY city DESC;


SET SQL_SAFE_UPDATES = 0;

UPDATE student1
SET grade = "O"
WHERE grade = "A";

SELECT * FROM student1;

UPDATE student1
SET grade = "B"
WHERE marks BETWEEN 80 AND 90;

SELECT * FROM student1;

UPDATE student1
SET marks = marks + 1;

SELECT * FROM student1; 

-- Updating 

UPDATE student1
SET marks = 12
WHERE rollno = 105;

SELECT * FROM student1;

DELETE FROM student1
WHERE marks<33;

SELECT * FROM student1;

-- If we type DELETE FROM student1 -- The whole table might get deleted from Database 

CREATE TABLE student2(
    id INT PRIMARY KEY,
    name VARCHAR(50)
);

INSERT INTO student2 (id, name)
VALUES
(101, "adam"),
(102, "bob"),
(103, "casey");

CREATE TABLE course(
    id INT PRIMARY KEY,
    course VARCHAR(50)
);

INSERT INTO course (id, course)
VALUES
(102, "English"),
(105, "Math"),
(103, "Science"),
(107, "Computer Science");

SELECT * FROM student2;
SELECT * FROM course;

SELECT *
FROM student2
INNER JOIN course
ON student2.id = course.id;

-- or 
 
SELECT *
FROM student2 as s2
INNER JOIN course as c
ON s2.id = c.id; 

SELECT *
FROM student2 as s2
LEFT JOIN course as c
ON s2.id = c.id;

SELECT *
FROM student2 as s2
RIGHT JOIN course as c
ON s2.id = c.id;

SELECT *
FROM student2 as s2
LEFT JOIN course as c
ON s2.id = c.id
UNION
SELECT *
FROM student2 as s2
RIGHT JOIN course as c
ON s2.id = c.id;

CREATE TABLE employee(
    id INT PRIMARY KEY,
    name VARCHAR(50),
    manager_id INT
);

INSERT INTO employee (id, name, manager_id)
VALUES
(101, "adam", 103),
(102, "bob", 104),
(103, "casey", NULL),
(104, "donald", 103);

SELECT * FROM employee;

SELECT *
FROM employee as a
JOIN employee as b
ON a.id = b.manager_id;

SELECT a.name, b.name
FROM employee as a
JOIN employee as b
ON a.id = b.manager_id;

SELECT name FROM employee
UNION 
SELECT name FROM employee;

SELECT name FROM employee
UNION ALL                   -- Gives duplicate values
SELECT name FROM employee; 

SELECT AVG(marks)
FROM student1;

SELECT name, marks
FROM student1
WHERE marks > 84.5000;


-- If new student is added in the table or incorrect-marks(mistakes) are corrected in the table 
-- then below code will automatically calculate updated value and will give us the updated result 
-- This SQL query is dynamic 

SELECT name, marks
FROM student1
WHERE marks > ( SELECT AVG(marks) FROM student1); 


SELECT rollno
FROM student1
WHERE rollno % 2 = 0;

SELECT name, rollno
FROM student1
WHERE rollno IN (102, 104, 106);

SELECT name, rollno
FROM student1
WHERE rollno IN ( 
    SELECT rollno
    FROM student1
    WHERE rollno % 2 = 0); 

    
SELECT *
FROM student1
WHERE city = "Delhi"; 

-- A demonstration that subqueries can be written in this way also 
SELECT MAX(marks)
FROM ( SELECT *
       FROM student1
	   WHERE city = "Delhi") AS temp;  
       
-- Also
SELECT MAX(marks)
FROM student1
WHERE city = "Delhi";

-- In SELECT also subqueries can be used but it's unused
SELECT (SELECT MAX(marks) FROM student1), name
FROM student;

-- Not real table but a virtual table 
CREATE VIEW view1 AS 
SELECT rollno, name, marks FROM student1;

SELECT * FROM view1;

-- now different conditions can be applied on view1
SELECT * FROM view1
WHERE marks > 90;

DROP VIEW view1;
